{"version":3,"sources":["webpack:///./src/main/webapp/utils/validate.js","webpack:///./src/main/webapp/views/login/index.vue?bf0c","webpack:///src/main/webapp/views/login/index.vue","webpack:///./src/main/webapp/views/login/index.vue?c1da","webpack:///./src/main/webapp/views/login/index.vue","webpack:///./src/main/webapp/views/login/index.vue?3508"],"names":["validateUsername","rule","value","callback","Error","validatePassword","length","validateOldPassword","this","form","checkPassword","$refs","validateField","validateCheckPassword","oldPassword","vaildateNewPassword","validatePhone","test","validateAddress","render","_vm","_h","$createElement","_c","_self","attrs","ref","rules","_v","model","$$v","$set","expression","password","nativeOn","$event","type","indexOf","_k","keyCode","key","handleLogin","eye","showPassword","loading","login","on","register","handleRegister","staticRenderFns","component"],"mappings":"gHAAA,8OAEO,IAAMA,EAAmB,SAACC,EAAMC,EAAOC,GAC9B,KAAVD,EACFC,EAAS,IAAIC,MAAM,WAEnBD,KAISE,EAAmB,SAACJ,EAAMC,EAAOC,GAC9B,KAAVD,EACFC,EAAS,IAAIC,MAAM,UACVF,EAAMI,OAAS,EACxBH,EAAS,IAAIC,MAAM,iBAEnBD,KAISI,EAAsB,SAAUN,EAAMC,EAAOC,GAC1C,KAAVD,EACFC,EAAS,IAAIC,MAAM,WAEa,KAA5BI,KAAKC,KAAKC,eACZF,KAAKG,MAAMF,KAAKG,cAAc,iBAEhCT,MAISU,EAAwB,SAAUZ,EAAMC,EAAOC,GAC5C,KAAVD,EACFC,EAAS,IAAIC,MAAM,YACVF,IAAUM,KAAKC,KAAKK,YAC7BX,EAAS,IAAIC,MAAM,cAEnBD,KAISY,EAAsB,SAACd,EAAMC,EAAOC,GACjC,KAAVD,EACFC,EAAS,IAAIC,MAAM,WACVF,EAAMI,OAAS,EACxBH,EAAS,IAAIC,MAAM,iBAEnBD,KAISa,EAAgB,SAACf,EAAMC,EAAOC,GAC3B,KAAVD,EACFC,EAAS,IAAIC,MAAM,WACT,6BAA6Ba,KAAKf,GAG5CC,IAFAA,EAAS,IAAIC,MAAM,cAMVc,EAAkB,SAACjB,EAAMC,EAAOC,GAC7B,KAAVD,EACFC,EAAS,IAAIC,MAAM,UAEnBD,M,yCCjEJ,IAAIgB,EAAS,WAAa,IAAIC,EAAIZ,KAASa,EAAGD,EAAIE,eAAmBC,EAAGH,EAAII,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,MAAM,CAAC,GAAK,oBAAoB,CAACF,EAAG,UAAU,CAACG,IAAI,OAAOD,MAAM,CAAC,MAAQL,EAAIX,KAAK,MAAQW,EAAIO,MAAM,iBAAiB,SAAS,CAACJ,EAAG,eAAe,CAACA,EAAG,KAAK,CAACH,EAAIQ,GAAG,kBAAkBL,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,aAAa,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,aAAa,UAAUF,EAAG,WAAW,CAACG,IAAI,WAAWD,MAAM,CAAC,YAAc,YAAYI,MAAM,CAAC3B,MAAOkB,EAAIX,KAAa,SAAEN,SAAS,SAAU2B,GAAMV,EAAIW,KAAKX,EAAIX,KAAM,WAAYqB,IAAME,WAAW,oBAAoB,GAAGT,EAAG,eAAe,CAACE,MAAM,CAAC,KAAO,aAAa,CAACF,EAAG,YAAY,CAACE,MAAM,CAAC,aAAa,cAAcF,EAAG,WAAW,CAACG,IAAI,WAAWD,MAAM,CAAC,KAAOL,EAAIa,SAAS,YAAc,YAAYC,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAIA,EAAOC,KAAKC,QAAQ,QAAQjB,EAAIkB,GAAGH,EAAOI,QAAQ,QAAQ,GAAGJ,EAAOK,IAAI,SAAkB,KAAcpB,EAAIqB,YAAYN,KAAUN,MAAM,CAAC3B,MAAOkB,EAAIX,KAAa,SAAEN,SAAS,SAAU2B,GAAMV,EAAIW,KAAKX,EAAIX,KAAM,WAAYqB,IAAME,WAAW,mBAAmBT,EAAG,YAAY,CAACE,MAAM,CAAC,aAAaL,EAAIsB,KAAKR,SAAS,CAAC,MAAQ,SAASC,GAAQ,OAAOf,EAAIuB,aAAaR,QAAa,GAAGZ,EAAG,eAAe,CAACA,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,QAAUL,EAAIwB,QAAQC,OAAOC,GAAG,CAAC,MAAQ1B,EAAIqB,cAAc,CAACrB,EAAIQ,GAAG,WAAWL,EAAG,YAAY,CAACE,MAAM,CAAC,KAAO,UAAU,QAAUL,EAAIwB,QAAQG,UAAUD,GAAG,CAAC,MAAQ1B,EAAI4B,iBAAiB,CAAC5B,EAAIQ,GAAG,eAAe,IAAI,IAAI,IAC15CqB,EAAkB,G,wBCyBtB,GACE,KAAF,QACE,KAFF,WAGI,MAAJ,CACM,KAAN,CACQ,SAAR,GACQ,SAAR,IAEM,MAAN,CACQ,SAAR,EACU,UAAV,OACU,QAAV,SAEQ,SAAR,EACU,UAAV,OACU,QAAV,UAGM,QAAN,CACQ,OAAR,EACQ,UAAR,GAEM,MAAN,EACM,cAAN,IAGE,MAAF,CACI,OAAJ,CACM,QAAN,YACQ,KAAR,oCAEM,WAAN,IAGE,SAAF,CACI,SADJ,WAEM,OAAN,yBAEI,IAJJ,WAKM,OAAN,8BAGE,QAAF,CACI,aADJ,WACM,IAAN,OACM,KAAN,gBACM,KAAN,sBACQ,EAAR,2BAGI,YAPJ,WAOM,IAAN,OACM,KAAN,iCACQ,IAAR,EAUU,OADA,EAAV,gCACA,EATU,EAAV,iBACU,EAAV,uDAAY,IACZ,YACY,EAAZ,iBACY,EAAZ,oBACY,EAAZ,cAAc,KAAd,qBACA,kBAAY,OAAZ,0BAOI,eAvBJ,WAuBM,IAAN,OACM,KAAN,iCACQ,IAAR,EASU,OADA,EAAV,gCACA,EARU,EAAV,oBACU,OAAV,OAAU,CAAV,0BAAY,IACZ,YACY,EAAZ,oBACY,EAAZ,uBACA,kBAAY,OAAZ,+BCnG4X,I,wBCQxXC,EAAY,eACd,EACA/B,EACA8B,GACA,EACA,KACA,KACA,MAIa,aAAAC,E,oECnBf,yBAAykB,EAAG","file":"js/chunk-05d377fb.1868cacf.js","sourcesContent":["// validate utils\r\n\r\nexport const validateUsername = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入用户名'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const validatePassword = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入密码'))\r\n  } else if (value.length < 6) {\r\n    callback(new Error('密码长度不能小于 6 位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const validateOldPassword = function (rule, value, callback) {\r\n  if (value === '') {\r\n    callback(new Error('请输入密码'))\r\n  } else {\r\n    if (this.form.checkPassword !== '') {\r\n      this.$refs.form.validateField('checkPassword')\r\n    }\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const validateCheckPassword = function (rule, value, callback) {\r\n  if (value === '') {\r\n    callback(new Error('请再次输入密码'))\r\n  } else if (value !== this.form.oldPassword) {\r\n    callback(new Error('两次输入密码不一致'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const vaildateNewPassword = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入新密码'))\r\n  } else if (value.length < 6) {\r\n    callback(new Error('密码长度不能小于 6 位'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const validatePhone = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入手机号'))\r\n  } else if (!/^[1][3,4,5,7,8,9][0-9]{9}$/.test(value)) {\r\n    callback(new Error('手机号格式不正确'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\nexport const validateAddress = (rule, value, callback) => {\r\n  if (value === '') {\r\n    callback(new Error('请输入地址'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"login-container\"}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"rules\":_vm.rules,\"label-position\":\"left\"}},[_c('el-form-item',[_c('h1',[_vm._v(\"Login Form\")])]),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('icon-font',{attrs:{\"icon-class\":\"user\"}}),_c('el-input',{ref:\"username\",attrs:{\"placeholder\":\"Username\"},model:{value:(_vm.form.username),callback:function ($$v) {_vm.$set(_vm.form, \"username\", $$v)},expression:\"form.username\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('icon-font',{attrs:{\"icon-class\":\"password\"}}),_c('el-input',{ref:\"password\",attrs:{\"type\":_vm.password,\"placeholder\":\"Password\"},nativeOn:{\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.handleLogin($event)}},model:{value:(_vm.form.password),callback:function ($$v) {_vm.$set(_vm.form, \"password\", $$v)},expression:\"form.password\"}}),_c('icon-font',{attrs:{\"icon-class\":_vm.eye},nativeOn:{\"click\":function($event){return _vm.showPassword($event)}}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading.login},on:{\"click\":_vm.handleLogin}},[_vm._v(\"Login\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.loading.register},on:{\"click\":_vm.handleRegister}},[_vm._v(\"Register\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"login-container\">\r\n    <el-form :model=\"form\" :rules=\"rules\" ref=\"form\" label-position=\"left\">\r\n      <el-form-item>\r\n        <h1>Login Form</h1>\r\n      </el-form-item>\r\n      <el-form-item prop=\"username\">\r\n        <icon-font icon-class=\"user\" />\r\n        <el-input v-model=\"form.username\" placeholder=\"Username\" ref=\"username\" />\r\n      </el-form-item>\r\n      <el-form-item prop=\"password\">\r\n        <icon-font icon-class=\"password\" />\r\n        <el-input :type=\"password\" v-model=\"form.password\" placeholder=\"Password\" ref=\"password\" @keyup.enter.native=\"handleLogin\" />\r\n        <icon-font :icon-class=\"eye\" @click.native=\"showPassword\" />\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :loading=\"loading.login\" @click=\"handleLogin\">Login</el-button>\r\n        <el-button type=\"primary\" :loading=\"loading.register\" @click=\"handleRegister\">Register</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import { register } from '@/api/user'\r\n  import { validateUsername, validatePassword } from '@/utils/validate'\r\n  export default {\r\n    name: 'Login',\r\n    data() {\r\n      return {\r\n        form: {\r\n          username: '',\r\n          password: ''\r\n        },\r\n        rules: {\r\n          username: [{\r\n            validator: validateUsername,\r\n            trigger: 'blur'\r\n          }],\r\n          password: [{\r\n            validator: validatePassword,\r\n            trigger: 'blur'\r\n          }]\r\n        },\r\n        loading: {\r\n          login: false,\r\n          register: false\r\n        },\r\n        show: false,\r\n        redirect: undefined\r\n      }\r\n    },\r\n    watch: {\r\n      $route: {\r\n        handler: function(route) {\r\n          this.redirect = route.query && route.query.redirect\r\n        },\r\n        immediate: true\r\n      }\r\n    },\r\n    computed: {\r\n      password() {\r\n        return this.show ? '' : 'password'\r\n      },\r\n      eye() {\r\n        return this.show ? 'eye' : 'eye-slash'\r\n      }\r\n    },\r\n    methods: {\r\n      showPassword() {\r\n        this.show = this.show ? false : true\r\n        this.$nextTick(() => {\r\n          this.$refs.password.focus()\r\n        })\r\n      },\r\n      handleLogin() {\r\n        this.$refs.form.validate(valid => {\r\n          if (valid) {\r\n            this.loading.login = true\r\n            this.$store.dispatch('user/login', this.form).then(response => {\r\n              const { message } = response\r\n              this.loading.login = false\r\n              this.$message.success(message)\r\n              this.$router.push({ path: this.redirect || '/' })\r\n            }).catch(() => this.loading.login = false)\r\n          } else {\r\n            this.$message.error('Format Error')\r\n            return false\r\n          }\r\n        })\r\n      },\r\n      handleRegister() {\r\n        this.$refs.form.validate(valid => {\r\n          if (valid) {\r\n            this.loading.register = true\r\n            register(this.form).then(response => {\r\n              const { message } = response\r\n              this.loading.register = false\r\n              this.$message.success(message)\r\n            }).catch(() => this.loading.register = false)\r\n          } else {\r\n            this.$message.error('Format Error')\r\n            return false\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  // fix: input cursor color\r\n  $cursor: #fff;\r\n  @supports (-webkit-mask: none) and (not (cater-color: $cursor)) {\r\n    #login-container .el-input input {\r\n      color: $cursor;\r\n    }\r\n  }\r\n  #login-container {\r\n    height: 100vh;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-image: linear-gradient(\r\n      125deg, #2c3e50, #16a085\r\n    );\r\n    .el-form {\r\n      width: 450px;\r\n      @for $i from 1 to 5 {\r\n        & > div:nth-child(#{$i}) {\r\n          animation: up (.5s + $i * .1);\r\n          margin-bottom: 25px;\r\n          &:nth-child(2), &:nth-child(3) {\r\n            border: 1px solid rgba(255, 255, 255, 0.1);\r\n            background: rgba(0, 0, 0, 0.1);\r\n            border-radius: 5px;\r\n            color: #454545;\r\n          }\r\n          h1 {\r\n            color: #eee;\r\n            font-size: 26px;\r\n            font-weight: bold;\r\n            text-align: center;\r\n            margin-top: 0;\r\n          }\r\n          .el-input {\r\n            width: 78%;\r\n            input {\r\n              border: 0;\r\n              color: #fff;\r\n              background: transparent;\r\n              caret-color: $cursor;\r\n              &:-webkit-autofill {\r\n                box-shadow: 0 0 0px 1000px #283443 inset !important;\r\n                -webkit-text-fill-color: $cursor !important;\r\n              }\r\n            }\r\n          }\r\n          svg {\r\n            color: #889aa4;\r\n            margin: 17px 5px 17px 15px;\r\n            vertical-align: middle;\r\n            user-select: none;\r\n            &:nth-child(3) {\r\n              cursor: pointer;\r\n            }\r\n          }\r\n          button {\r\n            width: 47.5%;\r\n            margin-bottom: 50px;\r\n            & + button {\r\n              margin-left: 5% !important;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=57bce6cd&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}