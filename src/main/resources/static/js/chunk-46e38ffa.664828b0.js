(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46e38ffa"],{"2fdb":function(e,r,t){},6654:function(e,r,t){"use strict";t.d(r,"g",(function(){return n})),t.d(r,"e",(function(){return o})),t.d(r,"d",(function(){return a})),t.d(r,"c",(function(){return s})),t.d(r,"a",(function(){return i})),t.d(r,"f",(function(){return u})),t.d(r,"b",(function(){return c}));var n=function(e,r,t){""===r?t(new Error("请输入用户名")):t()},o=function(e,r,t){""===r?t(new Error("请输入密码")):r.length<6?t(new Error("密码长度不能小于 6 位")):t()},a=function(e,r,t){""===r?t(new Error("请输入密码")):r.length<6?t(new Error("密码长度不能小于 6 位")):(""!==this.form.checkPassword&&this.$refs.form.validateField("checkPassword"),t())},s=function(e,r,t){""===r?t(new Error("请再次输入密码")):r!==this.form.oldPassword?t(new Error("两次输入密码不一致")):t()},i=function(e,r,t){""===r?t(new Error("请输入新密码")):r.length<6?t(new Error("密码长度不能小于 6 位")):t()},u=function(e,r,t){""===r?t(new Error("请输入手机号")):/^[1][3,4,5,7,8,9][0-9]{9}$/.test(r)?t():t(new Error("手机号格式不正确"))},c=function(e,r,t){""===r?t(new Error("请输入地址")):t()}},d823:function(e,r,t){"use strict";var n=t("2fdb"),o=t.n(n);o.a},ec2c:function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"status-icon":"","label-width":"70px"}},[t("el-form-item",[t("img",{attrs:{src:e.avatar}}),t("el-upload",{ref:"upload",attrs:{action:"#",limit:1,"auto-upload":!1,"before-upload":e.beforeUpdate,"http-request":e.httpRequest}},[t("el-button",{attrs:{slot:"trigger",icon:"el-icon-refresh"},on:{click:e.handleSelect},slot:"trigger"},[e._v("选择图片")]),t("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.handleUpload}},[e._v("点击上传")]),t("p",{attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传 jpg / png 文件, 且不超过 500kb")])],1)],1),t("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t("el-input",{model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[t("el-input",{model:{value:e.form.phone,callback:function(r){e.$set(e.form,"phone",r)},expression:"form.phone"}})],1),t("el-form-item",{attrs:{label:"地址",prop:"address"}},[t("el-input",{model:{value:e.form.address,callback:function(r){e.$set(e.form,"address",r)},expression:"form.address"}})],1),t("el-form-item",[t("el-button",{attrs:{icon:"el-icon-check",type:"primary"},on:{click:e.handleSubmit}},[e._v("提交")]),t("el-button",{attrs:{icon:"el-icon-switch-button"},on:{click:e.handleLogout}},[e._v("退出")])],1)],1)},o=[],a=(t("b0c0"),t("7b36")),s=t("6654"),i={name:"Info",data:function(){return{avatar:this.$store.getters.avatar,form:{username:this.$store.getters.name,phone:"",address:""},rules:{username:[{validator:s["g"],trigger:"blur"}],phone:[{validator:s["f"],trigger:"blur"}],address:[{validator:s["b"],trigger:"blur"}]}}},created:function(){var e=this;Object(a["a"])().then((function(r){var t=r.data;e.form=t.detail}))},methods:{beforeUpdate:function(e){return"image/jpeg"!==e.type&&"image/png"!==e.type?(this.$message.error("上传头像图片只能是 JPG 或 PNG 格式"),!1):!(e.size>1048576)||(this.$message.error("上传头像图片大小不能超过 1MB"),!1)},httpRequest:function(e){var r=this,t=e.file,n=new FormData;n.append("avatar",t),Object(a["h"])(n).then((function(e){var t=e.message,n=e.data;r.avatar=n.avatar,r.$store.commit("user/setAvatar",r.avatar),r.$message.success(t)})).catch((function(){return r.$refs.upload.clearFiles()}))},handleSelect:function(){this.$refs.upload.clearFiles()},handleUpload:function(){this.$refs.upload.uploadFiles.length>0?this.$refs.upload.submit():this.$message.error("请选择图片")},handleSubmit:function(){var e=this;this.$refs.form.validate((function(r){if(!r)return e.$message.error("Format Error"),!1;Object(a["g"])(e.form).then((function(r){var t=r.message;e.$store.commit("user/setName",e.form.username),e.$message.success(t)}))}))},handleLogout:function(){var e=this;this.$store.dispatch("user/logout").then((function(r){var t=r.message;e.$message.success(t),e.$router.push({path:"/"})}))}}},u=i,c=(t("d823"),t("2877")),l=Object(c["a"])(u,n,o,!1,null,"2c68013a",null);r["default"]=l.exports}}]);
//# sourceMappingURL=chunk-46e38ffa.664828b0.js.map